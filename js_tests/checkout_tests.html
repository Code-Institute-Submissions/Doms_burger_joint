<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>QUnit Test Suite</title>
    <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-2.12.0.css">

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Materialize imported for formSelect & collapsible functions found in combo_items.js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Stripe custom js -->
    <script src="https://js.stripe.com/v3/"></script>
    <!-- Mockjax used to create mock responses to Ajax calls therefore avoid live server communication in tests-->
    <script type="text/javascript" src="../static/vendor/js/jquery.mockjax.js"></script>
    <script src="https://code.jquery.com/qunit/qunit-2.12.0.js" 
    integrity="sha256-1OG2KXcIqF7ISoLYbZ9PxwTVRsgyiQJP5KGsQSycXvo="
    crossorigin="anonymous"></script>
    
  </head>
  <body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <div id="qunit-dom" style="display: none;">

        <div class="checkout-form-container">

            <div class="col s12" id="spending_warning"></div>

            <form id="payment_form">
                <input type="hidden" name="csrfmiddlewaretoken" value="csrf_123">
                <input type="hidden" name="for_collection" value="False">

                 <input type="text" name="name" maxlength="50" autofocus=""
                 placeholder="First name will do" class="stripe-style-input" required="" id="id_name" value="James">  

                <div class="field-error" id="name_error"></div>

                <input type="text" name="mobile_number" maxlength="15" 
                placeholder="So we can contact you" class="stripe-style-input" required="" id="id_mobile_number" value="07771 777 666">

                <div class="field-error" id="mobile_number_error"></div>

                <input type="email" name="email" maxlength="80" placeholder="To send your confirmation"
                class="stripe-style-input" required="" id="id_email" value="test@domain.co.uk">

                <div class="field-error" id="email_error"></div>

                <input type="text" name="address_line1" maxlength="80" 
                placeholder="Include flat number if applicable" class="stripe-style-input"
                required="" id="id_address_line1" value="101 test rd">

                <div class="field-error" id="address_line1_error"></div>

                <input type="text" name="address_line2" maxlength="80" placeholder="(optional)"
                class="stripe-style-input" id="id_address_line2" value="London">

                <div class="field-error" id="address_line2_error"></div>

                <input type="text" name="postcode" maxlength="9" placeholder="e.g. CT11 8AH"
                class="stripe-style-input" required="" id="id_postcode" value="S1D 3AP">

                <div class="field-error" id="postcode_error"></div>

                <input type="text" name="delivery_instructions" maxlength="100" placeholder="Any instructions for your driver"
                class="stripe-style-input" id="id_delivery_instructions" value="Leave round the back">

                <div class="field-error" id="delivery_instructions_error"></div>
               
                <div id="card_element"><!--Stripe.js injects the Card Element--></div>

                <p id="card_error" role="alert"></p>
                
                <button id="place_order_btn">
                    PLACE YOUR ORDER (Â£100)
                </button>
                
                <!-- div replaces button tags to stop the form submitting to non-existent backend -->
                <div id="test_submit_button" onclick="validateForm(event)"></div>
            </form>
            
        </div>

    </div>
    
    <!-- Add in mock environment variables that would normally be passed in via the view -->
    <script id="id_stripe_public_key" type="application/json">"test_public_key"</script>
    <script id="id_client_secret" type="application/json">"test_client_secret"</script> 
    <!-- Files to be tested -->
    <script src="../checkout/static/checkout/js/stripe_element.js"></script>
    <!-- File executing tests -->
    <script src="../checkout/static/checkout/js/tests.js"></script>   

</body>
</html>